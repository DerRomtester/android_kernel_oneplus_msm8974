/* Copyright (c) 2012-2014, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/include/ "../../msm8974-regulator.dtsi"

/include/ "dsi-panel-jdi-1080p-cmd.dtsi"
/include/ "msm8974-oppo-camera.dtsi"
/include/ "msm8974-oppo-camera-sensor.dtsi"
/include/ "msm8974-14001-camera-sensor.dtsi"
/include/ "msm8974-oppo-leds.dtsi"
/include/ "msm8974-oppo-misc.dtsi"
/include/ "msm8974-oppo-pm.dtsi"
/include/ "msm8974-oppo-usb.dtsi"
/include/ "msm8974-oppo-regulator.dtsi"

/ {
	aliases {
		serial0 = &blsp1_uart1;
	};

	memory {
		oem_data_mem: oem_data_region@5900000 {
			linux,reserve-contiguous-region;
			linux,reserve-region;
			linux,remove-completely;
			reg = <0x5900000 0x100000>;
		};
	};
};

&ehci {
	status = "ok";
	qcom,usb2-enable-uicc;
};

&soc {
	serial@f991e000 {
		status = "ok";
	};

	oem_data_sharedmem {
		compatible = "qcom,sharedmem-uio";
		reg = <0x5900000 0x100000>;
		reg-names = "oem_data";
	};

	qcom,mdss_dsi@fd922800 {
		qcom,dsi-pref-prim-pan = <&dsi_jdi_1080_cmd>;
	};

	qcom,mdss_mdp@fd900000 {
		qcom,mdss-pref-prim-intf = "dsi";
		batfet-supply = <&pm8941_chg_batif>;
	};

	qcom,hdmi_tx@fd922100 {
		status = "disabled";
	};
/*VENDOR_EDIT*/	
/*wangjc add bq27541 battery */
	i2c@f9923000 {
		bq27541-battery@55 {
			status = "okay";
			compatible = "ti,bq27541-battery";
			reg = <0x55>;
/* OPPO 2014-06-23 sjc Add begin for 14021 */
			microchip,mcu-en-gpio = <&pm8941_gpios 3 0>;
/* OPPO 2014-06-23 sjc Add end */
		};
		/* OPPO 2013-12-17 liaofuchun add for fastcg */
		pic16f_fastcg@25{
			status = "okay";
			compatible = "microchip,pic16f_fastcg";
			reg = <0x25>;
		};
		/* OPPO 2013-12-17 liaofuchun add end */
	};
/*wangjc add.*/

	i2c@f9924000 {
/*VENDOR_EDIT*/
/*OPPO yubin 2013-10-10 add begin for tp*/
		synaptics-rmi-ts@20 {
			compatible = "synaptics,rmi-ts";
			reg = <0x20>;
			interrupt-parent = <&msmgpio>;
			interrupts = <61 0x8>;
			synaptics,irq-gpio = <&msmgpio 61 0x00>;
			synaptics,wakeup-gpio = <&msmgpio 57 0x00>;
			synaptics,reset-gpio = <&msmgpio 60 0x00>;
			synaptics,id-gpio = <&msmgpio 62 0x00>;
			synaptics,id3-gpio = <&msmgpio 46 0x00>;
		};
/*OPPO yubin 2013-10-10 add end for tp*/

		atmel_mxt_ts@4a {
			compatible = "atmel,mxt-ts";
			reg = <0x4a>;
			interrupt-parent = <&msmgpio>;
			interrupts = <61 0x2>;
			vdd_ana-supply = <&pm8941_l18>;
			vcc_i2c-supply = <&pm8941_lvs1>;
			atmel,reset-gpio = <&msmgpio 60 0x00>;
			atmel,irq-gpio = <&msmgpio 61 0x00>;
			atmel,panel-coords = <0  0 760 1424>;
			atmel,display-coords = <0 0 720 1280>;
			atmel,i2c-pull-up;
			atmel,no-force-update;
			atmel,cfg_1 {
				atmel,fw-name = "atmel_8974_fluid_v1_0_AA.hex";
				atmel,family-id = <0x82>;
				atmel,variant-id = <0x19>;
				atmel,version = <0x10>;
				atmel,build = <0xaa>;
				atmel,config = [
					/* Object 6, Instance = 0 */
					00 00 00 00 00 00
					/* Object 38, Instance = 0 */
					15 01 00 03 0A 0C 00 00
					/* Object 7, Instance = 0 */
					20 08 32 03
					/* Object 8, Instance = 0 */
					0F 00 0A 0A 00 00 0A 0A 00 00
					/* Object 9, Instance = 0 */
					83 00 00 18 0E 00 70 46 02 01
					00 0A 03 31 04 05 0A 0A 90 05
					F8 02 05 F1 F1 0F 00 00 08 2D
					12 06 00 00 00 01
					/* Object 15, Instance = 0 */
					00 00 00 00 00 00 00 00 00 00
					00
					/* Object 18, Instance = 0 */
					00 00
					/* Object 19, Instance = 0 */
					00 00 00 00 00 00
					/* Object 23, Instance = 0 */
					00 00 00 00 00 00 00 00 00 00
					00 00 00 00 00
					/* Object 25, Instance = 0 */
					00 00 00 00 00 00 00 00 00 00
					00 00 00 00 00
					/* Object 40, Instance = 0 */
					00 00 00 00 00
					/* Object 42, Instance = 0 */
					33 1E 19 10 80 00 00 00 FF 00
					/* Object 46, Instance = 0 */
					00 00 10 10 00 00 03 00 00 01
					/* Object 47, Instance = 0 */
					08 0A 28 0A 02 0A 00 8C 00 20
					00 00 00
					/* Object 55, Instance = 0 */
					00 00 00 00 00 00
					/* Object 56, Instance = 0 */
					00 00 00 18 05 05 05 05 05 05
					05 05 05 05 05 05 05 05 05 05
					05 05 05 05 05 05 05 05 00 00
					00 00 00 00 00 00 00 00 00 00
					00 00
					/* Object 57, Instance = 0 */
					00 00 00
					/* Object 61, Instance = 0 */
					00 00 00 00 00
					/* Object 62, Instance = 0 */
					01 2A 00 16 00 00 00 00 0B 01
					02 03 04 08 00 00 08 10 18 05
					00 0A 05 05 50 14 19 34 1A 7F
					00 00 00 00 00 00 00 00 00 30
					05 02 00 01 00 05 00 00 00 00
					00 00 00 00
					];
			};
		};
/*OPPO yuyi 2013-09-27 add begin for rgb_led*/
		sn3193_issi_rgb@68 {
			compatible = "sn3193,issi-rgb";
			reg = <0x68>;
			sn3193,sdb-gpio = <&msmgpio 45 0x00>;
			};
/*OPPO yuyi 2013-09-27 add end for rgb _led*/
	/*yanghai add */
			ti_lm3630_bl@36 {
				compatible = "ti,lm3630";
				reg = <0x36>;
				ti,bank-a-ctrl = <0x05>;
				ti,init-brt-ed1 = <200>;
				ti,init-brt-led2 = <200>;
				ti,max-brt-led1 = <255>;
				ti,max-brt-led2 = <255>;
				ti,pwm-active = <0>;
				ti,pwm-ctrl = <0>;
				ti,pwm-period = <255>;
			};

/* OPPO 2014-06-23 ranfei Add begin for digital hall MXM2011 */
		dhall@0C {
			compatible = "magna,dhall";
			reg = <0x0c>;
			interrupt-parent = <&msmgpio>;
			interrupts = <64 0x4>;
			dhall,irq-gpio = <&msmgpio 64 0x2008>;
			vdd_2v8-supply = <&pm8941_l17>;
			vcc_i2c_1v8-supply = <&pm8941_lvs2>;						
		};
/* OPPO 2014-06-23 ranfei Add end */


		
	};
/*OPPO yuyi 2013-03-22 add begin for nfc*/
//ifdef VENDOR_EDIT
	i2c@f9928000 {
		pn544-nxp-nfc@28 {
			compatible = "pn544,nxp-nfc";
			reg = <0x28>;
			interrupt-parent = <&msmgpio>;
			interrupts = <59 0x4>;
			/*vdd_ana-supply = <&pm8941_S3A>;*/
			pn544,irq-gpio = <&msmgpio 59 0x00>;
			pn544,enable-gpio = <&msmgpio 13 0x00>;
			pn544,update-gpio = <&msmgpio 12 0x00>;
		};
		/*OPPO Wangjc 2013-11-7 add begin for bq charger*/
		bq24196_charger@6b {
			status = "okay";
			compatible = "ti,bq24196_charger";
			reg = <0x6b>;
		}; 
		/*Wangjc add end*/
		/* xiaojun.lv 2014-6-18 add for ti tas2552 smart PA */
		tas2552@40 {
			status = "okay";
			compatible = "ti,tas2552";
			tas2552,enable-gpio = <&msmgpio 92 0x00>;
			reg = <0x40>;
		}; 
		/*xiaojun.lv add end*/
		nfc-nci@e {
			compatible = "qcom,nfc-nci";
			reg = <0x0e>;
			qcom,irq-gpio = <&msmgpio 57 0x00>;
			qcom,dis-gpio = <&msmgpio 13 0x00>;
			qcom,clk-src = "BBCLK2";
			interrupt-parent = <&msmgpio>;
			interrupts = <57 0>;
			qcom,clk-gpio = <&pm8941_gpios 32 0>;
		};
	};
//endif //VENDOR_EDIT
/*OPPO yuyi 2013-03-22 add end*/

	gen-vkeys {
		compatible = "qcom,gen-vkeys";
		label = "atmel_mxt_ts";
		qcom,disp-maxx = <720>;
		qcom,disp-maxy = <1280>;
		qcom,panel-maxx = <760>;
		qcom,panel-maxy = <1424>;
		qcom,key-codes = <158 139 102 217>;
	};

	i2c@f9967000 {
		isa1200@48 {
			status = "okay";
			reg = <0x48>;
			vcc_i2c-supply = <&pm8941_s3>;
			compatible = "imagis,isa1200";
			label = "vibrator";
			imagis,chip-en;
			imagis,need-pwm-clk;
			imagis,ext-clk-en;
			imagis,hap-en-gpio = <&msmgpio 86 0x00>;
			imagis,max-timeout = <15000>;
			imagis,pwm-div = <256>;
			imagis,mode-ctrl = <2>;
			imagis,regulator {
				regulator-name = "vcc_i2c";
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <1800000>;
				regulator-max-microamp = <9360>;
			};
		};
	};
	
	/*OPPO ranfei add for fpc1021*/
	spi@f9968000 {
		fpc_fpc1020@0 { //Slave driver and CS ID
			compatible = "fpc,fpc1020"; //Manufacture, and Model
			reg = <0>; //Same as CS ID
			spi-max-frequency = <19200000>; //Max Frequency for Device
			#spi-cs-high; //CS Active High
			interrupt-parent = <&msmgpio>; //GPIO Handler
			interrupts = <102 0>; //GPIO # and flags
			fpc,gpio_irq = <&msmgpio 102 0x00>; //Pass a GPIO
			fpc,gpio_reset = <&msmgpio 84 0x00>; 
			fpc,vddtx_mv;
			#fpc,txout_boost_enable;
			#spi-cpol; //CPOL bit set for SPI polarity
			#spi-cpha; //CPHA bit set for SPI Phase
			vdd_io-supply = <&pm8941_s3>;  // 1.8V 
			vdd_ana-supply = <&pm8941_l18>; // 3.3V
		};
	};

	spi@f9965000 {
		p61-nxp-nfc@0 { //Slave driver and CS ID
			compatible = "p61,nxp-nfc"; //Manufacture, and Model
			reg = <0>; //Same as CS ID
			spi-max-frequency = <4000000>; //Max Frequency for Device
			spi-cs-high; //CS Active High
			interrupt-parent = <&msmgpio>; //GPIO Handler
			interrupts = <34 0>; //GPIO # and flags
			p61-nxp-nfc,irq-gpio = <&msmgpio 34 0x00>; //Pass a GPIO
			#spi-cpol; //CPOL bit set for SPI polarity
			#spi-cpha; //CPHA bit set for SPI Phase
		};
	};

	gpio_keys {
		compatible = "gpio-keys";
		input-name = "gpio-keys";
		status = "ok"; 

		camera_snapshot {
			label = "camera_snapshot";
			#gpios = <&pm8941_gpios 3 0x1>;
			linux,input-type = <1>;
			linux,code = <0x2fe>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};

		camera_focus {
			label = "camera_focus";
			gpios = <&pm8941_gpios 4 0x1>;
			linux,input-type = <1>;
			linux,code = <0x210>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};

		vol_up {
			label = "volume_up";
			gpios = <&pm8941_gpios 5 0x1>;
			linux,input-type = <1>;
			linux,code = <115>;
			debounce-interval = <15>;
		};
	
		vol_down {
			label = "volume_down";
			gpios = <&pm8941_gpios 2 0x1>;
			linux,input-type = <1>;
			linux,code = <114>;
			debounce-interval = <15>;
		};

		hallsensor_key {
			label = "hallsensor_key";
			gpios = <&msmgpio 68 1>;
			interrupt-parent = <&msmgpio>; 
			interrupts = <68 0x0>;
			linux,input-type = <5>;
			linux,code = <0>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};
	};

	spi@f9923000 {
		ethernet-switch@2 {
			compatible = "micrel,ks8851";
			reg = <2>;
			interrupt-parent = <&msmgpio>;
			interrupts = <94 0>;
			spi-max-frequency = <4800000>;
			rst-gpio = <&pm8941_mpps 6 0>;
			vdd-io-supply = <&spi_eth_vreg>;
			vdd-phy-supply = <&spi_eth_vreg>;
		};
	};

	sound {
		qcom,model = "msm8974-taiko-mtp-snd-card";
		qcom,cdc-micbias2-headset-only;
		qcom,mbhc-audio-jack-type = "4-pole-jack";
		qcom,hpmic-switch-gpio = <&msmgpio 87 0>;
		enable_spk-gpio = <&msmgpio 73 0>;
		cdc_spk-supply = <&pm8941_boost>;

		qcom,audio-routing =
			"AIF4 VI", "MCLK",
			"RX_BIAS", "MCLK",
			"LDO_H", "MCLK",
			"AIF4 MAD", "MCLK",
			"AMIC1", "MIC BIAS1 Internal1",
			"MIC BIAS1 Internal1", "Handset Mic",
			"AMIC2", "MIC BIAS2 External",
			"MIC BIAS2 External", "Headset Mic",

			"AMIC3", "MIC BIAS1 External",
			"MIC BIAS1 External", "Main Mic",
			"AMIC4", "MIC BIAS1 External",
			"MIC BIAS1 External", "Second Mic",
			"AMIC5", "MIC BIAS1 External",
			"MIC BIAS1 External", "ANC Mic",

			"DMIC1", "MIC BIAS1 External",
			"MIC BIAS1 External", "Digital Mic1",
			"DMIC2", "MIC BIAS1 External",
			"MIC BIAS1 External", "Digital Mic2",
			"DMIC3", "MIC BIAS3 External",
			"MIC BIAS3 External", "Digital Mic3",
			"DMIC4", "MIC BIAS3 External",
			"MIC BIAS3 External", "Digital Mic4",
			"DMIC5", "MIC BIAS4 External",
			"MIC BIAS4 External", "Digital Mic5",
			"DMIC6", "MIC BIAS4 External",
			"MIC BIAS4 External", "Digital Mic6";
	};
};

&sdcc1 {
       status = "disabled";
};

&sdcc2 {
	#address-cells = <0>;
	interrupt-parent = <&sdcc2>;
	interrupts = <0 1 2>;
	#interrupt-cells = <1>;
	interrupt-map-mask = <0xffffffff>;
	interrupt-map = <0 &intc 0 125 0
			1 &intc 0 220 0
			2 &msmgpio 62 0x3>;
	interrupt-names = "core_irq", "bam_irq", "status_irq";
	cd-gpios = <&msmgpio 62 0x1>;
	status = "disabled";
};

&sdhc_1 {
	vdd-supply = <&pm8941_l20>;
	vdd-io-supply = <&pm8941_s3>;

	qcom,vdd-always-on;
	qcom,vdd-lpm-sup;
	qcom,vdd-voltage-level = <2950000 2950000>;
	qcom,vdd-current-level = <800 500000>;

	qcom,vdd-io-always-on;
	qcom,vdd-io-voltage-level = <1800000 1800000>;
	qcom,vdd-io-current-level = <250 154000>;

	qcom,pad-pull-on = <0x0 0x3 0x3 0x1>; /* no-pull, pull-up, pull-up, pull-down */
	qcom,pad-pull-off = <0x0 0x3 0x3 0x1>; /* no-pull, pull-up, pull-up, pull-down */
	qcom,pad-drv-on = <0x4 0x4 0x4>; /* 10mA, 10mA, 10mA */
	qcom,pad-drv-off = <0x0 0x0 0x0>; /* 2mA, 2mA, 2mA */

	qcom,nonremovable;
	status = "ok";
};

&sdhc_2 {
	#address-cells = <0>;
	interrupt-parent = <&sdhc_2>;
	interrupts = <0 1 2>;
	#interrupt-cells = <1>;
	interrupt-map-mask = <0xffffffff>;
	interrupt-map = <0 &intc 0 125 0
			1 &intc 0 221 0
			2 &msmgpio 69 0x3>; /* Zhilong.Zhang@OnlineRd.Driver, 2013/11/08, Modify for change the micro SD card detect pin to a NULL pin (gpio_69)*/
	interrupt-names = "hc_irq", "pwr_irq", "status_irq";
	cd-gpios = <&msmgpio 69 0x1>; /* Zhilong.Zhang@OnlineRd.Driver, 2013/11/08, Modify for change the micro SD card detect pin to a NULL pin (gpio_69)*/

	vdd-supply = <&pm8941_l21>;
	vdd-io-supply = <&pm8941_l13>;

	qcom,vdd-voltage-level = <2950000 2950000>;
	qcom,vdd-current-level = <9000 800000>;

	qcom,vdd-io-voltage-level = <1800000 2950000>;
	qcom,vdd-io-current-level = <6 22000>;

	qcom,pad-pull-on = <0x0 0x3 0x3>; /* no-pull, pull-up, pull-up */
	qcom,pad-pull-off = <0x0 0x3 0x3>; /* no-pull, pull-up, pull-up */
	qcom,pad-drv-on = <0x4 0x4 0x4>; /* 10mA, 10mA, 10mA */
	qcom,pad-drv-off = <0x0 0x0 0x0>; /* 2mA, 2mA, 2mA */
	status = "ok";
};

/* Drive strength recommendations for clock line from hardware team is 10 mA.
 * But since the driver has been been using the below values from the start
 * without any problems, continue to use those.
 */
&sdcc1 {
	qcom,pad-drv-on = <0x7 0x4 0x4>; /* 16mA, 10mA, 10mA */
};

&sdcc2 {
	qcom,pad-drv-on = <0x7 0x4 0x4>; /* 16mA, 10mA, 10mA */
};

&sdhc_1 {
	qcom,pad-drv-on = <0x7 0x4 0x4>; /* 16mA, 10mA, 10mA */
};

&sdhc_2 {
	qcom,pad-drv-on = <0x7 0x4 0x4>; /* 16mA, 10mA, 10mA */
};

&usb_otg {
	qcom,hsusb-otg-otg-control = <2>;
};

&uart7 {
	status = "ok";
};

&usb3 {
	qcom,otg-capability;
};

&i2c_1 {
	status = "ok";
};

&slim_msm {
	taiko_codec {
		qcom,cdc-micbias1-ext-cap;
		qcom,cdc-micbias2-ext-cap;
		qcom,cdc-micbias3-ext-cap;
		qcom,cdc-micbias4-ext-cap;
		cdc-hpmic_switch-1-supply = <&pm8941_l24>;
		qcom,cdc-micbias-cfilt2-mv = <2000>;
	};
};
